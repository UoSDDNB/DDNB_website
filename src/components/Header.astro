---
// Header component with navigation
const basePath = import.meta.env.BASE_URL;
// Ensure basePath ends with slash for proper URL construction
const baseUrl = basePath.endsWith('/') ? basePath : basePath + '/';
---

<header class="bg-white border-b border-gray-200 sticky top-0 z-50">
  <div class="container-custom">
    <div class="flex items-center justify-center h-16">
      <!-- Logo -->
      <div class="flex-shrink-0 mr-8">
        <a href={`${baseUrl}`} class="flex items-center space-x-2">
          <img src={`${baseUrl}logo.svg`} alt="DDNB Logo" class="h-8 w-8" />
          <span class="text-xl font-bold text-gray-900">DDNB</span>
        </a>
      </div>
      
      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-8">
        <a href={`${baseUrl}`} class="text-gray-700 hover:text-tekhelet transition-colors duration-200">Home</a>
        <a href={`${baseUrl}research-themes/`} class="text-gray-700 hover:text-tekhelet transition-colors duration-200">Research Themes</a>
        <a href={`${baseUrl}team/`} class="text-gray-700 hover:text-tekhelet transition-colors duration-200">Meet the Team</a>
        <a href={`${baseUrl}publications/`} class="text-gray-700 hover:text-tekhelet transition-colors duration-200">Publications</a>
        <!-- Hacks and Data/Tools tabs - commented out for later
        <a href={`${baseUrl}hacks/`} class="text-gray-700 hover:text-tekhelet transition-colors duration-200">Hacks</a>
        <a href={`${baseUrl}data-tools/`} class="text-gray-700 hover:text-tekhelet transition-colors duration-200">Data/Tools</a>
        -->
      </nav>
      
      <!-- Mobile menu button -->
      <div class="md:hidden absolute right-4">
        <button 
          id="mobile-menu-button"
          class="text-gray-700 hover:text-tekhelet transition-colors duration-200"
          aria-label="Toggle mobile menu"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6h18M3 12h18M3 18h18"/>
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="md:hidden hidden border-t border-gray-200">
      <div class="px-2 pt-2 pb-3 space-y-1 text-center">
        <a href={`${baseUrl}`} class="block px-3 py-2 text-gray-700 hover:text-tekhelet transition-colors duration-200">Home</a>
        <a href={`${baseUrl}research-themes/`} class="block px-3 py-2 text-gray-700 hover:text-tekhelet transition-colors duration-200">Research Themes</a>
        <a href={`${baseUrl}team/`} class="block px-3 py-2 text-gray-700 hover:text-tekhelet transition-colors duration-200">Meet the Team</a>
        <a href={`${baseUrl}publications/`} class="block px-3 py-2 text-gray-700 hover:text-tekhelet transition-colors duration-200">Publications</a>
        <!-- Hacks and Data/Tools tabs - commented out for later
        <a href={`${baseUrl}hacks/`} class="block px-3 py-2 text-gray-700 hover:text-tekhelet transition-colors duration-200">Hacks</a>
        <a href={`${baseUrl}data-tools/`} class="block px-3 py-2 text-gray-700 hover:text-tekhelet transition-colors duration-200">Data/Tools</a>
        -->
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (mobileMenuButton && mobileMenu) {
    mobileMenuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      
      // Toggle icon
      const icon = mobileMenuButton.querySelector('svg');
      if (icon) {
        if (mobileMenu.classList.contains('hidden')) {
          icon.innerHTML = '<path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
        } else {
          icon.innerHTML = '<path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
        }
      }
    });
  }
  
  // Close mobile menu when clicking outside
  document.addEventListener('click', (event) => {
    if (mobileMenu && !mobileMenuButton?.contains(event.target as Node) && !mobileMenu.contains(event.target as Node)) {
      mobileMenu.classList.add('hidden');
      const icon = mobileMenuButton?.querySelector('svg');
      if (icon) {
        icon.innerHTML = '<path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
      }
    }
  });
</script>
